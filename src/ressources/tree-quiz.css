/* modifications for tree quiz */
bsl-tree[quiz="true"] .tree {
  --border-pending: orange;
  --tooltip-bg: var(--hole-yellow);
  --tooltip-border: var(--branch-color);
  --wrong-border: darkred;
  --correct-border: darkgreen;
  --selection-tentative: yellow;
  --selection-border: var(--branch-color);
  --selection-correct: green;
  --selection-wrong: red;
}
bsl-tree[quiz="true"] .tree {
  margin-top: 4em;
}
bsl-tree[quiz="true"] .tree span {
  cursor: auto;
  border: 1px solid var(--correct-border);
}
bsl-tree[quiz="true"] .tree span[data-collapsed="true"] {
  border: 1px solid var(--border-pending);
}
bsl-tree[quiz="true"] .tree span[data-wrong="true"] {
  border: 1px solid var(--wrong-border);
}

/* style production and select */
bsl-tree[quiz="true"] .tree .name {
  font-size: inherit;
}

bsl-tree[quiz="true"] .tree .name {
  position: relative;
  display: block;
  text-align: left;
}

bsl-tree[quiz="true"] .tree .name > select {
  position: absolute;
  display: inline-block;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}

/* hide name tooltip by default */
bsl-tree[quiz="true"] .tree .name > .tip {
  display: none;
}

/* display tooltip over root */
bsl-tree[quiz="true"] .tree > li > span[data-collapsed="true"] .name > .tip {
  display: block;
  position: absolute;
  left: 80%;
  bottom: 150%;
  width: 18em;
  background-color: var(--tooltip-bg);
  border: 1px solid var(--tooltip-border);
  padding: .5em;
}
bsl-tree[quiz="true"] .tree > li > span[data-collapsed="true"] .name > .tip::after {
  content: "";
  position: absolute;
  width: 1em;
  height: 1em;
  left: 0.5em;
  bottom: calc(-0.5em - 1px);
  transform: rotate(45deg);
  background-color: var(--tooltip-bg);
  border-right: 1px solid var(--tooltip-border);
  border-bottom: 1px solid var(--tooltip-border);
}

/* showing/hiding code without holes */
bsl-tree[quiz="true"] .tree .codeblock {
  position: relative;
  display: block;
}
bsl-tree[quiz="true"] .tree .actualcode {
  display: none;
}
bsl-tree[quiz="true"] .tree span[data-collapsed="true"] .actualcode {
  position: absolute;
  display: block;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: var(--node-background);
}
bsl-tree[quiz="true"] .tree .char {
  display: inline;
  margin: 0;
  border: none;
  padding: 0;
  border-radius: 0;
  background-color: transparent;
  transition: background-color 1s ease-out;
}
bsl-tree[quiz="true"] .tree .char::before {
  display: none;
}
bsl-tree[quiz="true"] .tree .selection-start {
  background-color: var(--selection-tentative);
  border: 1px solid var(--selection-border);
  border-right: none;
}
bsl-tree[quiz="true"] .tree .selection-start ~ span {
  background-color: var(--selection-tentative);
  border-top: 1px solid var(--selection-border);
  border-bottom: 1px solid var(--selection-border);
}

bsl-tree[quiz="true"] .tree .selection-end {
  border: 1px solid var(--selection-border);
  border-left: none;
}
bsl-tree[quiz="true"] .tree .selection-end ~ span {
  border: none;
  background-color: transparent;
}

bsl-tree[quiz="true"] .tree .correct-selection-start,
bsl-tree[quiz="true"] .tree .correct-selection-middle,
bsl-tree[quiz="true"] .tree .correct-selection-end {
  user-select: none;
  background-color: var(--selection-correct);
  border: 1px solid var(--selection-border);
}
bsl-tree[quiz="true"] .tree .wrong-selection-start,
bsl-tree[quiz="true"] .tree .wrong-selection-middle,
bsl-tree[quiz="true"] .tree .wrong-selection-end {
  user-select: none;
  background-color: var(--selection-wrong);
  border: 1px solid var(--selection-border);
}
bsl-tree[quiz="true"] .tree .correct-selection-start,
bsl-tree[quiz="true"] .tree .correct-selection-middle,
bsl-tree[quiz="true"] .tree .wrong-selection-start,
bsl-tree[quiz="true"] .tree .wrong-selection-middle, {
  border-right: none;
}
bsl-tree[quiz="true"] .tree .correct-selection-end,
bsl-tree[quiz="true"] .tree .correct-selection-middle,
bsl-tree[quiz="true"] .tree .wrong-selection-end,
bsl-tree[quiz="true"] .tree .wrong-selection-middle, {
  border-left: none;
}
