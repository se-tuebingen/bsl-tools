<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Using AST View</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="preamble.html">BSL-Tools</a></li><li class="chapter-item expanded affix "><li class="part-title">Abstract Syntax Tree View (AST)</li><li class="chapter-item expanded "><a href="ast.html" class="active"><strong aria-hidden="true">1.</strong> Using AST View</a></li><li class="chapter-item expanded "><a href="demo-ast.html"><strong aria-hidden="true">2.</strong> Demo</a></li><li class="chapter-item expanded affix "><li class="part-title">Small Step Interpreter (Stepper)</li><li class="chapter-item expanded "><a href="stepper.html"><strong aria-hidden="true">3.</strong> Using Stepper</a></li><li class="chapter-item expanded "><a href="demo-stepper.html"><strong aria-hidden="true">4.</strong> Demo</a></li><li class="chapter-item expanded affix "><li class="part-title">Building locally</li><li class="chapter-item expanded "><a href="building.html"><strong aria-hidden="true">5.</strong> Building locally</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ast-view"><a class="header" href="#ast-view">AST View</a></h1>
<p>The Abstract Syntax Tree View shows the Abstract Syntax Tree of a given expression in the BSL grammar (or another given grammar in JSON).</p>
<h2 id="using-ast-view-with-html"><a class="header" href="#using-ast-view-with-html">Using AST View with HTML</a></h2>
<h3 id="including-bsl_toolsjs"><a class="header" href="#including-bsl_toolsjs">Including bsl_tools.js</a></h3>
<p>To use the AST-View, you need to add the script anywhere in your document as
follows:</p>
<pre><code class="language-html">&lt;!-- import the bsl_tools script somewhere on the page, ideally in the head --&gt;
&lt;script src=&quot;bsl_tools.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>Note that if you add one or more of the following tools to your page, the script
will add stylesheets to the <code>&lt;head&gt;</code> of your document which set styles for the
<code>.bsl-tools-stepper</code> and <code>.bsl-tools-tree</code> classes.</p>
<p><strong><code>&lt;</code> and <code>&gt;</code> need to be replaced with <code>&amp;lt;</code> and <code>&amp;gt;</code> in order to not break your HTML!</strong></p>
<h3 id="planting-the-bsltree"><a class="header" href="#planting-the-bsltree">Planting the &lt;bsltree&gt;</a></h3>
<p>The collapsible AST view can be used with BSL code, which will be parsed for you,
or you can provide your own JSON structure.</p>
<p>The interface is as follows:</p>
<pre><code class="language-html">&lt;bsltree&gt; (valid bsl syntax) &lt;/bsltree&gt;
</code></pre>
<p>The collapsible AST view also provides an
optional &quot;quiz&quot; mode that starts the tree collapsed and expands if you select
the correct production and mark all subexpressions ('holes').</p>
<pre><code class="language-html">&lt;!-- if you want to display it in quiz mode, do --&gt;
&lt;bsltree quiz=&quot;true&quot;&gt; (valid bsl syntax) &lt;/bsltree&gt;

&lt;!-- for displaying user text in german, do --&gt;
&lt;bsltree quiz=&quot;true&quot; lang=&quot;de&quot;&gt; (valid bsl syntax) &lt;/bsltree&gt;

&lt;!-- displaying code trees for stuff that is not BSL --&gt;
&lt;jsontree quiz=&quot;true&quot; lang=&quot;de&quot;
  &gt;&lt;!-- same options as for bsltree --&gt;
  { &quot;production&quot;: &quot;Subtraction&quot;, &quot;code&quot;: &quot;(|2| - |3|)&quot;, &quot;holes&quot;: [ {
  &quot;production&quot;: &quot;Number&quot;, &quot;code&quot;: &quot;2&quot;}, { &quot;production&quot;: &quot;Number&quot;, &quot;code&quot;: &quot;3&quot;} ]
  }
&lt;/jsontree&gt;
</code></pre>
<p>Anything inside the <code>&lt;bsltree&gt;</code> tag is parsed according to the BSL Core Language as documented below.</p>
<p>If you want to use <code>&lt;jsontree&gt;</code>, you need to provide valid JSON - so use double quotes (<code>&quot;</code>)!
<code>&quot;code&quot;</code> always needs to be a string, mark holes (code of children) by putting <code>|</code>s
around it. If you want to, you can provide your own grammar in the <code>&quot;grammar&quot;</code> field
of the root node, like this:</p>
<pre><code>...
&quot;grammar&quot;: {
  &quot;production name&quot;: [&quot;rule 1&quot;, &quot;rule 2&quot;],
  ...,
  &quot;terminal symbol&quot;: [],
  ...
}
...
</code></pre>
<p>Note that the object keys need to match exactly the productions you use in your
nodes. The Rules are shown as tooltips on hover, and the keys are used as
options in quiz mode. If no grammar is specified, quiz mode options are inferred
from all occurring productions.</p>
<p>The <code>lang</code> attribute is only applicable for Quiz mode, since the regular tree does not display any text in natural language. Currently implemented codes are <code>en</code>(English, default) and <code>de</code>(German).</p>
<h2 id="using-ast-view-with-scribble"><a class="header" href="#using-ast-view-with-scribble">Using AST View with Scribble</a></h2>
<h3 id="including-the-files"><a class="header" href="#including-the-files">Including the Files</a></h3>
<p>To use the provided scribble module, you need to import it in your document:</p>
<pre><code class="language-racket">@(require &quot;bsl_tools.rkt&quot;)
</code></pre>
<p>The scribble module does only very little input sanitation and mostly just adds
the JavaScript-Module to your rendered HTML as well as wrapping the input in
the correct custom HTML tags. Both files (<code>bsl_tools.rkt</code> <strong>AND</strong> <code>bsl_tools.js</code>)
need to be in the same folder as well as your scribble file so that everything works.</p>
<h3 id="scribbling-the-trees"><a class="header" href="#scribbling-the-trees">Scribbling the Trees</a></h3>
<p>For the collapsible AST Production Trees, the interface in Scribble is as follows:</p>
<ul>
<li>For BSL Expressions, we use Rackets Syntax Objects, which have a similar structure as S-Expressions</li>
<li>For other Expressions, you need to provide a JSON object with the correct structure, which will <strong>not</strong> be checked at compile-time!</li>
</ul>
<pre><code class="language-racket">@bsltree[
  #:quiz #t   @; optional keyword argument, default is #f
  #:lang &quot;de&quot; @; optional keyword argument, default is &quot;en&quot;
  #'((valid bsl syntax))
]

@jsontree[
  #:quiz #t   @; optional keyword argument, default is #f
  #:lang &quot;de&quot; @; optional keyword argument, default is &quot;en&quot;
]{
  {
    &quot;production&quot;: &quot;Subtraction&quot;,
    &quot;code&quot;: &quot;(|2| - |3|)&quot;,
    &quot;holes&quot;: [
      { &quot;production&quot;: &quot;Number&quot;, &quot;code&quot;: &quot;2&quot;},
      { &quot;production&quot;: &quot;Number&quot;, &quot;code&quot;: &quot;3&quot;}
    ]
  }
}
</code></pre>
<p>It is necessary to wrap the BSL-Syntax with a <code>#'()</code>, especially when there are multiple <code>&lt;def-or-expr&gt;</code>,
however literal values, such as <code>2</code> don't need to be wrapped.
The Scribble module parses the BSL-Syntax to a string in a <code>&lt;bsltree&gt;</code> and adds the javascript module as dependency.</p>
<p>The JSON structure for non-BSL-Syntax needs to contain</p>
<ul>
<li>a <code>&quot;production&quot;</code> name (string)</li>
<li>some <code>&quot;code&quot;</code> (string) optionally with holes fenced by <code>|</code></li>
<li>optionally under <code>&quot;holes&quot;</code> a list of children with the same structure</li>
<li>optionally the root node can contain a custom <code>&quot;grammar&quot;</code> as described in the html API above</li>
</ul>
<p>If you set the optional keyword argument <code>#:quiz</code> to <code>#t</code>, it will add <code>quiz=&quot;true&quot;</code> which displays the tree in quiz mode.</p>
<p>Similarly, the <code>#:lang</code> keyword argument can be used to set the language code. This is only applicable for Quiz mode, since the regular tree does not display any text in natural language. Currently implemented codes are <code>en</code>(English, default) and <code>de</code>(German).</p>
<p>For the <code>@jsontree</code>-helper, there also is the <code>#:extrastyle</code> option, whose string
argument will be added inside a HTML <code>&lt;style&gt;</code> tag above the HTML that is processed
by the Javascript part. This way, you can override some styles, but not set CSS
variables (<code>--</code> will be converted to <code>&amp;ndash;</code>, sadly).
If, for example, your production labels are significantly larger than the text in
your nodes, you can give the nodes (represented by <code>&lt;span&gt;</code> elements)
greater horizontal spacing with</p>
<pre><code>#:extrastyle &quot;jsontree .bsl-tools-tree span { margin-left: 2em; margin-right: 2em;}&quot;
</code></pre>
<p>Note that you need to scope your styles to <code>.bsl-tools-tree</code>, or they are less
specific than those in the general stylesheet and will be overridden.
Also note that inline CSS is not scoped and will apply to all your <code>jsontree</code> elements (or whatever you specify).</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="preamble.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="demo-ast.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="preamble.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="demo-ast.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
